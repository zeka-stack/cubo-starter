<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dev.dong4j.zeka.starter.dict.dao.DictionaryTypeMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="DictionaryTypeResultMap" type="dev.dong4j.zeka.starter.dict.entity.po.DictionaryType">
        <result column="id" property="id"/>
        <result column="deleted" property="deleted"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
        <result column="code" property="code"/>
        <result column="name" property="name"/>
        <result column="description" property="description"/>
        <result column="state" property="state"/>
        <result column="order" property="order"/>
        <result column="tenant_id" property="tenantId"/>
        <result column="client_id" property="clientId"/>
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="all_field">
        a.id,
        a.`code`,
        a.`name`,
        a.`description`,
        a.`state`,
        a.`order`,
        a.`tenant_id`,
        a.`client_id`
    </sql>

    <sql id="date_query">
        <if test="query.startTime != null">
            <![CDATA[
                and a.create_time >= #{query.startTime}
            ]]>
        </if>
        <if test="query.endTime != null">
            <![CDATA[
                and a.create_time < #{query.endTime}
            ]]>
        </if>
    </sql>

    <select id="page" resultType="dev.dong4j.zeka.starter.dict.entity.dto.DictionaryTypeDTO"
            parameterType="dev.dong4j.zeka.starter.dict.entity.form.DictionaryTypeQuery">
        select
        <include refid="all_field"/>
        from sys_dictionary_type as a
        <where>
            and a.deleted = 0
            <include refid="date_query"/>
        </where>
    </select>
</mapper>
